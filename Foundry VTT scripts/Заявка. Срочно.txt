(async () => {
  const wait = (ms) => new Promise((resolve) => setTimeout(resolve, ms));

  const text = '<h1 style="text-align: center;"><span style="font-size:36px;"><span style="color:#dd0000;">= С Р О Ч Н О =</span></span></h1><img src="https://raw.githubusercontent.com/dkubrow-dev/share/master/images/hand-fire.webp?raw=true" width="350">';

  // 1) Сначала создаём сообщение и ждём завершения
  await ChatMessage.create({
    user: game.user._id,
    speaker: ChatMessage.getSpeaker({ token: actor }),
    content: text
  });

  // 2) Потом проигрываем 3 раза с паузой 0.5с
  const sound = {
    src: 'https://raw.githubusercontent.com/dkubrow-dev/share/master/sounds/alarm-clock.ogg',
    volume: 1,
    autoplay: true,
    loop: false
  };

  await foundry.audio.AudioHelper.play(sound, true);
})();